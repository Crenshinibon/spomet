assert = require 'assert'

e1 = new Spomet.Entity()
e1.text = 'this should be easily found'
e1.path = '1'

e2 = new Spomet.Entity()
e2.text = 'much more harder to find'
e2.path = '2'


suite 'Searches', () ->
    test 'find something', (done, server, client) ->
        server.eval () ->
            Spomet.index e1
            Spomet.index e2
            emit 'return'
        client.once 'return', () ->
            res = Spomet.find 'easily found'
            assert.equal res.size, 1
            done()